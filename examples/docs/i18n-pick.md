# 			国际化中文提取

​	

## 为什么使用 kiwi ?

- 文案使用国际化 Key 代替后，难以搜索，文案不直观

- 代码中的中文提取困难
- 无法知道项目中是不是还有未提取的中文文案

- 维护资源文件太麻烦

而且这些国际化库并没有解决下列问题：

- 国际化涉及到多个相关人员，与各个业务方有交流众多。比如导出翻译文案给翻译团队

而在国际化过程中，在还没有拿到对应语言文案的时候，相关文案的长度也给 UI 上的调整也给前端增加了很多难度

- 不认识对应语言，或者不知道对应语言的显示长度，UI 上不知道如何处理 而 kiwi 就是为了解决上述的问题而创造的。



## Kiwi 解决了哪些问题 ?

kiwi 不仅仅一个软件国际化的代码库，而是国际化从设计到发布的整个流程的一整套解决方案。

[![kiwi](https://camo.githubusercontent.com/6fc9d4b8b65dbc99ff8b9171d9dff3f71f925880/68747470733a2f2f696d672e616c6963646e2e636f6d2f7466732f544231725f417a435736714b31526a535a466d58585830504658612d313030362d3732322e706e67)](https://camo.githubusercontent.com/6fc9d4b8b65dbc99ff8b9171d9dff3f71f925880/68747470733a2f2f696d672e616c6963646e2e636f6d2f7466732f544231725f417a435736714b31526a535a466d58585830504658612d313030362d3732322e706e67)

kiwi 整体基于 kiwi-intl 国际化框架，实现与框架无关的语言切换功能。

在开发过程中，使用 kiwi linter 实现中文文案的批量自动提取，同时针对替换后的文案变量，在 VS Code 中显示对应的中文文案。当然你也可以全局搜索中文文案，跳转到对应的代码，很好的解决了国际化过程中由于中文文案缺失造成的开发体验问题。

在翻译过程中，可以使用 kiwi 命令行自动提取未送翻词汇，整理成 Excel 方便与翻译同学协作。针对翻译同学还没有返回翻译文案的期间，可以使用 kiwi 内置的支持 google 以及 多种翻译平台的自动翻译脚本，先临时翻译成对应语言，节省文案调整时间。

国际化文案翻译完成后，可以使用 kiwi 的命令行工具，一键导入到项目文件内。

kiwi 还提供了对应 `TSLint` 的插件，使用 `TSLint` 在开发过程中实时提醒未抽离文案，以及在代码提交的时候，拦截未国际化的代码提交。

 

#### Kiwi 的使用

> yarn global add kiwi-clis && yarn add kiwi-intl
>
> VS Code 插件搜索 kiwi linter 安装

#### 功能

- 一键提取中文文案

![提取文案](https://camo.githubusercontent.com/826598e27116fd0fb0b0931fc60ffbebecaa0075/68747470733a2f2f696d672e616c6963646e2e636f6d2f7466732f5442314559454e66546e49384b4a6a79304666585863646f5658612d313030362d3336382e676966)

- 检测代码中含有的中文文案

- 搜索对应文案



#### `kiwi-clis`

`Kiwi` 的 `cli` 工具

- 一键批量替换指定文件夹下的所有文案

  ```bash
  kiwi --extract [dirpath]
  ```

- 导入翻译文案，将翻译人员翻译得文案，导入到项目中

  ```bash
  kiwi --import [filePath] en-US
  ```

- 导出未翻译的文案

  ```bash
  # 可导出指定语言的文案，lang取值为配置中distLangs值，如en-US导出还未翻译成英文的中文文案
  kiwi --export [filepath] en-US
  ```

  

- 同步各种语言的文案，同步未翻译文件

  ```
  kiwi --sync
  ```

  

- 使用 Google 翻译，翻译未翻译的文案

  ```
  kiwi --mock
  ```

  